locality alice
locality bob

name n: nonce @ alice
corr adv ==> [n]

struct s {
    _tag : Sing(0x00000001),
    _message : Data<adv> | |nonce| |
}

def alice_main() @ alice : Unit =
    let n = get(n) in
    let t = 0x00000001 in
    let sv = s(t, n) in
    output sv to endpoint(bob)

def bob_main() @ bob : Unit =
    input i in
    parse i as s(t, n) in {
    assert(t == 0x00000001);
    ()
    } otherwise ()
    